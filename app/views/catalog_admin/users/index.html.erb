<% provide(:title, t('users')) %>

<% provide(:actions) do %>
  <%= link_to(new_catalog_admin_user_path) do %>
    <%= fa_icon(:"user-plus", :text => t('new_user')) %>
  <% end %>
<% end %>

<table class="table">
  <thead>
    <tr>
      <th><%= t('email') %></th>
      <th><%= t('role') %></th>
      <th><%= t('invited') %></th>
      <th><%= t('last_signed_in') %></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= fa_icon(:user, :text => user.email) %></td>
        <td><%= user_role(user) %></td>
        <td><%= l(user.created_at, :format => :long) %></td>
        <td><%= last_signed_in(user) %></td>
        <td style="text-align: right">
          <% if policy(user).edit_in_catalog?(catalog) %>
            <%= render "shared/actions_dropdown", :model => user %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>


<% provide(:extra_setup) do %>
<hr/>

<div class="panel panel-default">
  <div class="panel-heading">
    <span class="pull-right">
      <%= link_to(fa_icon(:users, text: t('.manage_my_groups')), groups_path) %>
    </span>
    Groups
  </div>
  <%= render 'group_permissions' %>
</div>

<% end %>
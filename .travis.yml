language: ruby
cache:
  - yarn
  - bundler
rvm:
  - 2.4.1
env:
  global:
    - CC_TEST_REPORTER_ID=7584f701366dd59b5a4383208a0a92710886f09a9a8bdb0e9d644dbf5c67d338
before_install:
  - sudo apt-get install -y imagemagick
before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build
  - bundle exec bin/setup
  - yarn install
script:
  - bundle exec rake test
after_script:
  - ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT
services:
  - redis-server
addons:
  postgresql: '9.5'
  chrome: stable
  apt:
    update: true
notifications:
  slack:
    rooms:
      secure: kv1k/U9+RMI38UbYhLjozs1/Qz40gNJDaKKj6m90EfmKOFIh4yOSLOhif/1kfXPCBZai+yM2kyiP4SQqW0zF3O1A8D/k5DIWhtqT6zlkswVcwaCtXFuOaPFyAiyLKpnzX/R/K30dUe4fdvAzmsRY991EXXzJE2brtHP0pTzHaGGdVZZOc5q5BOU/wfPgPtXdR1HszTiwypWBFVOZncJN/0psPyO9gg/P5KoSCg9GBrQitjFafghvOQfmhzTSGbI9Fig1+KvCzjwRYpxjr0pGzLhPL4SBmwUF11+U11sTvAH27IA9YsHcmjqVS0CcFntsgwX7HKeDGSGx4daNGhyBB5je/Hcxt64FEs9X+/R7r2voWag2FvGyWI451L+8jxnUKev8Qhl+dWSMG3ekdH3F5M/weCpRhR8d3h/5/N7zgDe5/v2ZVTKIqVx+6HooS7fVyawkTBFEUe+1I6i+G6NWVI2N7Nym6NWaP1/kg2FcnPTiCgxsIAqkgqBUX+G0N3xPgTxDzNnFhCLuthcv5lK89M4fHJ7AQNotgQP3DB1b1mMmAs3NLa5Ny7xFxK/PFSzjMmB8zws6fFRJQV3QV1NdKfZWSUigXJ5P0u6r83fYolWkTjPkueLq9Q56NI9AVHdgKsJfTvlQbZKS5oCJkqfVnPc+W9FQwW30bkvCHRhVb2w=
